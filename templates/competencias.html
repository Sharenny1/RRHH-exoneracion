{% extends "base.html" %}
{% block content %}

<div class="page-header">
    <div>
        <h2>Competencias</h2>
        <p>Gestión de competencias organizacionales y técnicas</p>
    </div>

    <button class="btn-new" onclick="openModal()">
        + Nueva Competencia
    </button>

</div>


<div class="table-card">
    <table class="custom-table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Descripción</th>
                <th>Estado</th>
                <th class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for comp in competencias %}
            <tr>
                <td>COMP-{{ "%03d"|format(comp.id) }}</td>
                <td class="bold">{{ comp.nombre }}</td>
                <td>
                    {% if comp.estado == "Activo" %}
                        <span class="badge-active">Activo</span>
                    {% else %}
                        <span class="badge-inactive">Inactivo</span>
                    {% endif %}
                </td>
                <td class="acciones-cell">

                    <a href="#"
                    class="icon-edit"
                    onclick="openModal('{{ comp.id }}','{{ comp.nombre }}','{{ comp.estado }}')">
                        <i class="fa-solid fa-pen-to-square"></i>
                    </a>

                    <form method="POST"
                        action="{{ url_for('competencia.eliminar_competencia', id=comp.id) }}"
                        style="display:inline;">
                        <button type="submit" class="icon-delete">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>

                </td>


            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>


<!-- MODAL -->

<div id="editModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Editar Competencia</h3>
            <span class="close" onclick="closeModal()">&times;</span>
        </div>

        <form method="POST" id="editForm">
            <input type="hidden" name="id" id="edit-id">

            <div class="form-group">
                <label>Descripción</label>
                <input type="text" name="descripcion" id="edit-descripcion" required>
            </div>

            <div class="form-group">
                <label>Estado</label>
                <select name="estado" id="edit-estado">
                    <option value="Activo">Activo</option>
                    <option value="Inactivo">Inactivo</option>
                </select>
            </div>
            
            <button type="submit" class="btn-primary">Guardar</button>
        </form>
    </div>
</div>
<script src="{{ url_for('static', filename='js/competencias.js') }}"></script>


{% endblock %}
